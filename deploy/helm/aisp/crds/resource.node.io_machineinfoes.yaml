
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.7.0
  creationTimestamp: null
  name: machineinfoes.resource.node.io
spec:
  group: resource.node.io
  names:
    kind: MachineInfo
    listKind: MachineInfoList
    plural: machineinfoes
    singular: machineinfo
  scope: Namespaced
  versions:
  - name: v1alpha1
    schema:
      openAPIV3Schema:
        description: MachineInfo is a specification for a MachineInfo resource
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: MachineInfoSpec implement by node exporter
            properties:
              CPUTopology:
                description: actually, CPUTopology can be generated by info.MachineInfo,
                  but we still keep it since it construct topology info in a more
                  convenient way
                properties:
                  cpuDetails:
                    additionalProperties:
                      description: CPUInfo contains the NUMA, socket, and core IDs
                        associated with a CPU.
                      properties:
                        coreID:
                          type: integer
                        numaNodeID:
                          type: integer
                        socketID:
                          type: integer
                      required:
                      - coreID
                      - numaNodeID
                      - socketID
                      type: object
                    type: object
                  numCPUs:
                    type: integer
                  numCores:
                    type: integer
                  numNUMANodes:
                    type: integer
                  numSockets:
                    type: integer
                  numaNodeIDToSocketID:
                    additionalProperties:
                      type: integer
                    type: object
                required:
                - cpuDetails
                - numCPUs
                - numCores
                - numNUMANodes
                - numSockets
                - numaNodeIDToSocketID
                type: object
              extraCPUInfo:
                description: ExtraCPUInfo is extra cpu info not in MachineInfo, such
                  as supported instructions
                properties:
                  supportInstructionSet:
                    additionalProperties:
                      description: Empty is public since it is used by some internal
                        API objects for conversions between external string arrays
                        and internal sets, and conversion logic requires public types
                        today.
                      type: object
                    description: SupportInstructionSet instructions all cpus support.
                    type: object
                required:
                - supportInstructionSet
                type: object
              extraNetworkInfo:
                description: ExtraNetworkInfo is extra network info not in MachineInfo,
                  such as numa node of each interface
                properties:
                  interface:
                    description: Interface info list of all network interface.
                    items:
                      properties:
                        addr:
                          description: Addr address of this interface, which includes
                            ipv4 and ipv6.
                          properties:
                            ipV4:
                              items:
                                description: "An IP is a single IP address, a slice
                                  of bytes. Functions in this package accept either
                                  4-byte (IPv4) or 16-byte (IPv6) slices as input.
                                  \n Note that in this documentation, referring to
                                  an IP address as an IPv4 address or an IPv6 address
                                  is a semantic property of the address, not just
                                  the length of the byte slice: a 16-byte slice can
                                  still be an IPv4 address."
                                format: byte
                                type: string
                              type: array
                            ipV6:
                              items:
                                description: "An IP is a single IP address, a slice
                                  of bytes. Functions in this package accept either
                                  4-byte (IPv4) or 16-byte (IPv6) slices as input.
                                  \n Note that in this documentation, referring to
                                  an IP address as an IPv4 address or an IPv6 address
                                  is a semantic property of the address, not just
                                  the length of the byte slice: a 16-byte slice can
                                  still be an IPv4 address."
                                format: byte
                                type: string
                              type: array
                          required:
                          - ipV4
                          - ipV6
                          type: object
                        enable:
                          description: Enable whether enable this interface.
                          type: boolean
                        iface:
                          description: Iface name of this interface.
                          type: string
                        nsAbsolutePath:
                          description: NSAbsolutePath indicates the namespace path
                            for this interface
                          type: string
                        nsName:
                          description: NSName indicates the namespace for this  interface
                          type: string
                        numaNode:
                          description: NumaNode numa node of this interface belongs
                            to.
                          type: integer
                        speed:
                          description: Speed of this interface.
                          type: integer
                      required:
                      - addr
                      - enable
                      - iface
                      - nsAbsolutePath
                      - nsName
                      - numaNode
                      - speed
                      type: object
                    type: array
                required:
                - interface
                type: object
              extraTopologyInfo:
                description: ExtraTopologyInfo is extra topology info not in MachineInfo,
                  such as numa node distance between each other
                properties:
                  numaDistanceMap:
                    additionalProperties:
                      items:
                        properties:
                          distance:
                            type: integer
                          numaID:
                            type: integer
                        required:
                        - distance
                        - numaID
                        type: object
                      type: array
                    type: object
                  siblingNumaInfo:
                    properties:
                      siblingNumaAvgMBWAllocatableMap:
                        additionalProperties:
                          format: int64
                          type: integer
                        description: SiblingNumaAvgMBWAllocatableMap maps NUMA IDs
                          to the allocatable memory bandwidth, averaged across each
                          NUMA node and its siblings. SiblingNumaAvgMBWCapacityMap
                          maps NUMA IDs to the capacity memory bandwidth, averaged
                          similarly.
                        type: object
                      siblingNumaAvgMBWCapacityMap:
                        additionalProperties:
                          format: int64
                          type: integer
                        type: object
                      siblingNumaMap:
                        additionalProperties:
                          additionalProperties:
                            description: Empty is public since it is used by some
                              internal API objects for conversions between external
                              string arrays and internal sets, and conversion logic
                              requires public types today.
                            type: object
                          type: object
                        type: object
                    required:
                    - siblingNumaAvgMBWAllocatableMap
                    - siblingNumaAvgMBWCapacityMap
                    - siblingNumaMap
                    type: object
                required:
                - numaDistanceMap
                - siblingNumaInfo
                type: object
              machineInfo:
                properties:
                  boot_id:
                    description: The boot id
                    type: string
                  cloud_provider:
                    description: Cloud provider the machine belongs to.
                    type: string
                  cpu_frequency_khz:
                    description: Maximum clock speed for the cores, in KHz.
                    format: int64
                    type: integer
                  disk_map:
                    additionalProperties:
                      properties:
                        major:
                          description: Major number
                          format: int64
                          type: integer
                        minor:
                          description: Minor number
                          format: int64
                          type: integer
                        name:
                          description: device name
                          type: string
                        scheduler:
                          description: I/O Scheduler - one of "none", "noop", "cfq",
                            "deadline"
                          type: string
                        size:
                          description: Size in bytes
                          format: int64
                          type: integer
                      required:
                      - major
                      - minor
                      - name
                      - scheduler
                      - size
                      type: object
                    description: Disk map
                    type: object
                  filesystems:
                    description: Filesystems on this machine.
                    items:
                      properties:
                        capacity:
                          description: Total number of bytes available on the filesystem.
                          format: int64
                          type: integer
                        device:
                          description: Block device associated with the filesystem.
                          type: string
                        has_inodes:
                          description: HasInodes when true, indicates that Inodes
                            info will be available.
                          type: boolean
                        inodes:
                          description: Total number of inodes available on the filesystem.
                          format: int64
                          type: integer
                        type:
                          description: Type of device.
                          type: string
                      required:
                      - capacity
                      - device
                      - has_inodes
                      - inodes
                      - type
                      type: object
                    type: array
                  hugepages:
                    description: HugePages on this machine.
                    items:
                      properties:
                        num_pages:
                          description: number of huge pages
                          format: int64
                          type: integer
                        page_size:
                          description: huge page size (in kB)
                          format: int64
                          type: integer
                      required:
                      - num_pages
                      - page_size
                      type: object
                    type: array
                  instance_id:
                    description: ID of cloud instance (e.g. instance-1) given to it
                      by the cloud provider.
                    type: string
                  instance_type:
                    description: Type of cloud instance (e.g. GCE standard) the machine
                      is.
                    type: string
                  machine_id:
                    description: The machine id
                    type: string
                  memory_by_type:
                    additionalProperties:
                      properties:
                        capacity:
                          description: The amount of memory (in bytes).
                          format: int64
                          type: integer
                        dimm_count:
                          description: Number of memory DIMMs.
                          type: integer
                      required:
                      - capacity
                      - dimm_count
                      type: object
                    description: Memory capacity and number of DIMMs by memory type
                    type: object
                  memory_capacity:
                    description: The amount of memory (in bytes) in this machine
                    format: int64
                    type: integer
                  network_devices:
                    description: Network devices
                    items:
                      properties:
                        mac_address:
                          description: Mac Address
                          type: string
                        mtu:
                          description: Maximum Transmission Unit
                          format: int64
                          type: integer
                        name:
                          description: Device name
                          type: string
                        speed:
                          description: Speed in MBits/s
                          format: int64
                          type: integer
                      required:
                      - mac_address
                      - mtu
                      - name
                      - speed
                      type: object
                    type: array
                  num_cores:
                    description: The number of cores in this machine.
                    type: integer
                  num_physical_cores:
                    description: The number of physical cores in this machine.
                    type: integer
                  num_sockets:
                    description: The number of cpu sockets in this machine.
                    type: integer
                  nvm:
                    properties:
                      app direct_mode_capacity:
                        description: The total NVM capacity in bytes for app direct
                          mode.
                        format: int64
                        type: integer
                      avg_power_budget:
                        description: Average power budget in watts for NVM devices
                          configured in BIOS.
                        type: integer
                      memory_mode_capacity:
                        description: The total NVM capacity in bytes for memory mode.
                        format: int64
                        type: integer
                    required:
                    - app direct_mode_capacity
                    - avg_power_budget
                    - memory_mode_capacity
                    type: object
                  swap_capacity:
                    description: The amount of swap (in bytes) in this machine
                    format: int64
                    type: integer
                  system_uuid:
                    description: The system uuid
                    type: string
                  topology:
                    description: Machine Topology Describes cpu/memory layout and
                      hierarchy.
                    items:
                      properties:
                        caches:
                          items:
                            properties:
                              id:
                                description: Id of memory cache
                                type: integer
                              level:
                                description: Level (distance from cpus) in a multi-level
                                  cache hierarchy.
                                type: integer
                              size:
                                description: Size of memory cache in bytes.
                                format: int64
                                type: integer
                              type:
                                description: 'Type of memory cache: data, instruction,
                                  or unified.'
                                type: string
                            required:
                            - id
                            - level
                            - size
                            - type
                            type: object
                          type: array
                        cores:
                          items:
                            properties:
                              book_id:
                                type: string
                              caches:
                                items:
                                  properties:
                                    id:
                                      description: Id of memory cache
                                      type: integer
                                    level:
                                      description: Level (distance from cpus) in a
                                        multi-level cache hierarchy.
                                      type: integer
                                    size:
                                      description: Size of memory cache in bytes.
                                      format: int64
                                      type: integer
                                    type:
                                      description: 'Type of memory cache: data, instruction,
                                        or unified.'
                                      type: string
                                  required:
                                  - id
                                  - level
                                  - size
                                  - type
                                  type: object
                                type: array
                              core_id:
                                type: integer
                              drawer_id:
                                type: string
                              socket_id:
                                type: integer
                              thread_ids:
                                items:
                                  type: integer
                                type: array
                              uncore_caches:
                                items:
                                  properties:
                                    id:
                                      description: Id of memory cache
                                      type: integer
                                    level:
                                      description: Level (distance from cpus) in a
                                        multi-level cache hierarchy.
                                      type: integer
                                    size:
                                      description: Size of memory cache in bytes.
                                      format: int64
                                      type: integer
                                    type:
                                      description: 'Type of memory cache: data, instruction,
                                        or unified.'
                                      type: string
                                  required:
                                  - id
                                  - level
                                  - size
                                  - type
                                  type: object
                                type: array
                            required:
                            - caches
                            - core_id
                            - socket_id
                            - thread_ids
                            - uncore_caches
                            type: object
                          type: array
                        distances:
                          items:
                            format: int64
                            type: integer
                          type: array
                        hugepages:
                          items:
                            properties:
                              num_pages:
                                description: number of huge pages
                                format: int64
                                type: integer
                              page_size:
                                description: huge page size (in kB)
                                format: int64
                                type: integer
                            required:
                            - num_pages
                            - page_size
                            type: object
                          type: array
                        memory:
                          description: Per-node memory
                          format: int64
                          type: integer
                        node_id:
                          type: integer
                      required:
                      - caches
                      - cores
                      - distances
                      - hugepages
                      - memory
                      - node_id
                      type: object
                    type: array
                  vendor_id:
                    description: Vendor id of CPU.
                    type: string
                required:
                - boot_id
                - cloud_provider
                - cpu_frequency_khz
                - disk_map
                - filesystems
                - hugepages
                - instance_id
                - instance_type
                - machine_id
                - memory_by_type
                - memory_capacity
                - network_devices
                - num_cores
                - num_physical_cores
                - num_sockets
                - nvm
                - swap_capacity
                - system_uuid
                - topology
                - vendor_id
                type: object
              memoryTopology:
                properties:
                  memoryDetails:
                    additionalProperties:
                      format: int64
                      type: integer
                    type: object
                required:
                - memoryDetails
                type: object
            required:
            - CPUTopology
            - extraCPUInfo
            - extraNetworkInfo
            - extraTopologyInfo
            - machineInfo
            - memoryTopology
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
